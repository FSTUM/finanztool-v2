{% extends 'base.html' %}
{% load bootstrap5 %}
{% load l10n %}

{% block title %}Finanztool - Aufgabe {{ aufgabe.art.name }}{% endblock %}

{% block content %}
<h1>Aufgabe</h1>
<h2>{{ aufgabe.art.name }} {{ aufgabe.zusatz }} {{ aufgabe.jahr|unlocalize }}</h2>
<br>

<table class="table table-striped table-hover">
    <tr>
        <th>Frist</th>
        <td>{{ aufgabe.frist }}</td>
    </tr>
    <tr>
        <th>Erledigt?</th>
        <td>
            {% if aufgabe.erledigt %}
            <span class="bi bi-check-circle-fill"></span>
            {% else %}
            <span class="bi bi-person-x-fill"></span>
            {% endif %}
        </td>
    </tr>
    <tr>
        <th>Zust√§ndig</th>
        <td>{{ aufgabe.zustaendig.get_full_name }}</td>
    </tr>
    <tr>
        <th>Bearbeiter</th>
        <td>{{ aufgabe.bearbeiter.get_full_name|default_if_none:"" }}</td>
    </tr>
    {% if aufgabe.semester or aufgabe.jahr %}
    <tr>
        <th>Betrifft</th>
        <td>{{ aufgabe.get_semester_display|default_if_none:"" }} {{ aufgabe.jahr|unlocalize|default_if_none:"" }}</td>
    </tr>
    {% endif %}
    <tr>
        <th>Weitere Informationen</th>
        <td>{{ aufgabe.text }}</td>
    </tr>
</table>

<form method="POST">{% csrf_token %}
    <a
        class="btn btn-primary"
        href="{% url "aufgaben:aendern" aufgabe.id %}"
    >Bearbeiten</a>
    {% bootstrap_form form %}
    {% if aufgabe.erledigt %}
    <button
        class="btn btn-warning"
        name="nicht-erledigt"
        type="submit"
    >Nicht mehr Erledigt</button>
    {% else %}
    <button
        class="btn btn-success"
        name="erledigt"
        type="submit"
    >Erledigt</button>
    {% endif %}
</form>

{% endblock %}
