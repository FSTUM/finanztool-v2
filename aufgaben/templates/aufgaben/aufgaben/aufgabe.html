{% extends 'aufgaben/aufgaben_base.html' %}
{% load bootstrap5 %}
{% load l10n %}

{% block finanz_common_headercontent %}Aufgabe {{ aufgabe.art.name }} {{ aufgabe.zusatz }} {{ aufgabe.jahr|unlocalize }}{% endblock %}
{% block title %}Finanztool - Aufgabe {{ aufgabe.art.name }}{% endblock %}

{% block finanz_common_content %}
<table class="table table-striped table-hover">
    <tr>
        <th>Frist</th>
        <td>{{ aufgabe.frist }}</td>
    </tr>
    <tr>
        <th>Erledigt?</th>
        <td>{% include "snippets/true_false_span.html" with value=aufgabe.erledigt %}</td>
    </tr>
    <tr>
        <th>Zust√§ndig</th>
        <td>{{ aufgabe.zustaendig.get_full_name }}</td>
    </tr>
    <tr>
        <th>Bearbeiter</th>
        <td>{{ aufgabe.bearbeiter.get_full_name|default_if_none:"" }}</td>
    </tr>
    {% if aufgabe.semester or aufgabe.jahr %}
    <tr>
        <th>Betrifft</th>
        <td>{{ aufgabe.get_semester_display|default_if_none:"" }} {{ aufgabe.jahr|unlocalize|default_if_none:"" }}</td>
    </tr>
    {% endif %}
    <tr>
        <th>Weitere Informationen</th>
        <td>{{ aufgabe.text }}</td>
    </tr>
</table>

<form method="POST">{% csrf_token %}
    <a
        class="btn btn-primary"
        href="{% url "aufgaben:aendern" aufgabe.id %}"
    >Bearbeiten</a>
    {% bootstrap_form form %}
    {% if aufgabe.erledigt %}
    <button
        class="btn btn-warning"
        name="nicht-erledigt"
        type="submit"
    >Nicht mehr Erledigt</button>
    {% else %}
    <button
        class="btn btn-success"
        name="erledigt"
        type="submit"
    >Erledigt</button>
    {% endif %}
</form>

{% endblock %}
