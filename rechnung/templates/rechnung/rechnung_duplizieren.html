{% extends 'base.html' %}
{% load i18n %}
{% load bootstrap3 %}

{% block title %}Rechnung duplizieren{% endblock %}

{% block content %}
<h3>
    <div class="alert alert-danger">
        Möchtest du wirklich diese Rechnung duplizieren?
    </div>
</h3>
<h1>Rechnung duplizieren</h1>

<p><a
        href="{% url "rechnung:rechnung" rechnung_id=rechnung.pk %}"
        class="btn btn-default"
        role="button"
    >{% bootstrap_icon "arrow-left" %}
        Zurück zur Rechnung
    </a></p>

<div class="row">
    <div class="col-md-6">
        <p><span class="text-muted">
                Mit * markierte Felder sind verpflichtend
            </span></p>

        <form method="POST">{% csrf_token %}
            {% bootstrap_form form %}
            <button
                type="submit"
                class="save btn btn-default"
            >
                {% bootstrap_icon "floppy-disk" %} Sichern
            </button>
        </form>
    </div>
</div>
<div class="row">
    <div class="col-md-10">
        <h3>Posten</h3>
        <p><span class="text-muted">
                Posten können nach dem Duplizieren bearbeitet werden
            </span></p>

        <br />
        <table class="table">
            <tr>
                <th class="text-right">Anzahl</th>
                <th>Bezeichnung</th>
                <th class="text-right">Einzelpreis</th>
                <th class="text-right">Mwst-Satz</th>
                <th class="text-right">Summe Netto</th>
            </tr>
            {% for posten in rechnung.posten_set.all %}
            <tr>
                <td align="right">{{ posten.anzahl }} </td>
                <td>{{ posten.name }}</td>
                <td align="right">{{ posten.einzelpreis }} €</td>
                <td align="right">{{ posten.get_mwst_display }}</td>
                <td align="right">{{ posten.summenettogerundet }} €</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <div class="col-md-10">
        <table class="table">
            <tr>
                <th>Zwischensumme (netto):</th>
                <td align="right">{{ rechnung.zwischensumme }} €</td>
            </tr>
            <tr>
                <th>Zzgl. Mehrwertsteuer 7%</th>
                <td align="right">{{ rechnung.summe_mwst_7 }} €</td>
            </tr>
            <tr>
                <th>Zzgl. Mehrwertsteuer 19%</th>
                <td align="right">{{ rechnung.summe_mwst_19 }} €</td>
            </tr>
            <tr>
                <th>Gesamt (brutto):</th>
                <td align="right"><b>{{ rechnung.gesamtsumme }} €<b></td>
            </tr>
        </table>
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $('#pick_ldatum').datetimepicker({
            inline: true,
            sideBySide: true,
            format: 'DD.MM.YYYY',
        });
    });
    $(function () {
        $('#pick_fdatum').datetimepicker({
            inline: true,
            sideBySide: true,
            format: 'DD.MM.YYYY',
        });
    });
    $(function () {
        $('#pick_rdatum').datetimepicker({
            inline: true,
            sideBySide: true,
            format: 'DD.MM.YYYY',
        });
    });
</script>
{% endblock %}
