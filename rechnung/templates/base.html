{% load active_link_tags %}
{% load static %}
{% load i18n %}
{% load bootstrap5 %}

<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta
        content="IE=edge"
        http-equiv="X-UA-Compatible"
    >
    <meta
        content="width=device-width, initial-scale=1, shrink-to-fit=no"
        name="viewport"
    >

    <link
        href="{% static "favicon.ico" %}"
        rel="shortcut icon"
        type="image/png"
    >
    <link
        href='{% static "bootstrap/dist/css/bootstrap.min.css" %}'
        rel='stylesheet'
    >
    <link
        href='{% static "bootstrap-icons/font/bootstrap-icons.css" %}'
        rel='stylesheet'
    >

    <script src="{% static "jquery/dist/jquery.min.js" %}"></script>
    <script src="{% static "bootstrap/dist/js/bootstrap.bundle.min.js" %}"></script>

    <link
        href="{% static "style.css" %}"
        media="all"
        rel="stylesheet"
    >

    <title>{% block title %}Finanz - Rechnungen{% endblock %}</title>

    {% block head %}{% endblock %}
    {% block extrahead %} {# Extra Resources Start #}
    {{ form.media }} {# Form required JS and CSS #}
    {% endblock %} {# Extra Resources End #}
</head>

<body class="bg-body">
    <header>
        <nav class="navbar navbar-expand-xl navbar-dark bg-dark mb-4">
            <div class="container-fluid">
                <a
                    class="navbar-brand"
                    href="{% url "rechnung:willkommen" %}"
                >Finanztool</a>
                <button
                    aria-controls="navbarSupportedContent"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
                    class="navbar-toggler"
                    data-bs-target="#navbarSupportedContent"
                    data-bs-toggle="collapse"
                    type="button"
                >
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div
                    class="collapse navbar-collapse"
                    id="navbarSupportedContent"
                >
                    {# on the right #}
                    <nav class="navbar-nav me-auto mb-2 mb-lg-0">
                        {% if user.is_authenticated %}
                        {% if user.is_superuser %}
                        <a
                            class="nav-link {% active_link 'rechnung:unerledigt' %}"
                            href="{% url "rechnung:unerledigt" %}"
                        >Unerledigt</a>
                        <li class="nav-item dropdown">
                            <a
                                aria-expanded="false"
                                class="nav-link dropdown-toggle {% if not not_rechnung %}{% active_link 'rechnung:index' %}{% endif %}"
                                data-bs-toggle="dropdown"
                                href="#"
                                id="navbarDropdown"
                                role="button"
                            >Rechnung</a>
                            <ul
                                class="dropdown-menu"
                                aria-labelledby="navbarDropdown"
                            >
                                <li><a
                                         class="dropdown-item {% active_link 'rechnung:rechnung_neu' %}"
                                        href="{% url "rechnung:rechnung_neu" %}"
                                    >
                                        Hinzufügen
                                    </a></li>
                                <li><a
                                         class="dropdown-item {% active_link 'rechnung:rechnungsuchen' %}"
                                        href="{% url "rechnung:rechnungsuchen" %}"
                                    >
                                        Suchen
                                    </a></li>
                                <li><a
                                         class="dropdown-item {% active_link 'rechnung:alle' %}"
                                        href="{% url "rechnung:alle" %}"
                                    >
                                        Alle
                                    </a></li>
                                <li><a
                                         class="dropdown-item {% active_link 'rechnung:alle_mahnungen' %}"
                                        href="{% url "rechnung:alle_mahnungen" %}"
                                    >
                                        Alle Mahnungen
                                    </a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a
                                class="nav-link dropdown-toggle {% active_link 'rechnung:kunden_index' %}"
                                href="#"
                                id="navbarDropdown"
                                role="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                            >Kunde</a>
                            <ul
                                class="dropdown-menu"
                                aria-labelledby="navbarDropdown"
                            >
                                <li><a
                                         class="dropdown-item {% active_link 'rechnung:kunde_neu' %}"
                                        href="{% url "rechnung:kunde_neu" %}"
                                    >
                                        Hinzufügen
                                    </a></li>
                                <li><a
                                         class="dropdown-item {% active_link 'rechnung:kundesuchen' %}"
                                        href="{% url "rechnung:kundesuchen" %}"
                                    >
                                        Suchen
                                    </a></li>
                                <li><a
                                         class="dropdown-item {% active_link 'rechnung:kunden_alle' %}"
                                        href="{% url "rechnung:kunden_alle" %}"
                                    >
                                        Alle
                                    </a></li>
                            </ul>
                        </li>

                        <li class="nav-item dropdown">
                            <a
                                class="nav-link dropdown-toggle {% active_link 'aufgaben:index' %}"
                                href="#"
                                id="navbarDropdown"
                                role="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                            >Aufgaben</a>
                            <ul
                                aria-labelledby="navbarDropdown"
                                class="dropdown-menu"
                            >
                                <li><a
                                         class="dropdown-item {% active_link 'aufgaben:unerledigt' %}"
                                        href="{% url "aufgaben:unerledigt" %}"
                                    >Unerledigt</a></li>
                                <li><a
                                         class="dropdown-item {% active_link 'aufgaben:neu' %}"
                                        href="{% url "aufgaben:neu" %}"
                                    >Hinzufügen</a></li>
                                <li><a
                                         class="dropdown-item {% active_link 'aufgaben:neu_aufgabenart' %}"
                                        href="{% url "aufgaben:neu_aufgabenart" %}"
                                    >Aufgabenart hinzufügen</a></li>
                                <li><a
                                         class="dropdown-item {% active_link 'aufgaben:alle' %}"
                                        href="{% url "aufgaben:alle" %}"
                                    >Alle</a></li>
                            </ul>
                        </li>
                        {% endif %}
                        <li class="nav-item dropdown">
                            <a
                                class="nav-link dropdown-toggle {% active_link 'schluessel:index' %}"
                                href="#"
                                id="navbarDropdown"
                                role="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                            >Schlüssel</a>
                            <ul
                                class="dropdown-menu"
                                aria-labelledby="navbarDropdown"
                            >
                                <li><a
                                         class="dropdown-item {% active_link 'schluessel:list_keys' %}"
                                        href="{% url "schluessel:list_keys" %}"
                                    >Suchen</a></li>
                                {% if user.is_superuser %}
                                <li><a
                                         class="dropdown-item {% active_link 'schluessel:add_key' %}"
                                        href="{% url "schluessel:add_key" %}"
                                    >Hinzufügen</a></li>
                                {% endif %}
                                <li><a
                                         class="dropdown-item {% active_link 'schluessel:list_persons' %}"
                                        href="{% url "schluessel:list_persons" %}"
                                    >Person suchen</a></li>
                                <li><a
                                         class="dropdown-item {% active_link 'schluessel:add_person' %}"
                                        href="{% url "schluessel:add_person" %}"
                                    >Person hinzufügen</a></li>
                                {% if user.is_superuser %}
                                <li><a
                                         class="dropdown-item {% active_link 'schluessel:list_key_changes' %}"
                                        href="{% url "schluessel:list_key_changes" %}"
                                    >Vorgemerkte Typ-Änderungen</a></li>
                                <li><a
                                         class="dropdown-item {% active_link 'schluessel:show_log' %}"
                                        href="{% url "schluessel:show_log" %}"
                                    >Letzte Änderungen</a></li>
                                {% endif %}
                            </ul>
                        </li>
                        {% if user.is_superuser %}
                        <a
                            class="nav-link {% active_link 'konto:einlesen' %}"
                            href="{% url "konto:einlesen" %}"
                        >Konto</a>
                        {% endif %}
                        {% else %}
                        <a
                            class="nav-link {% active_link 'rechnung:unerledigt' %}"
                            href="{% url "rechnung:index" %}"
                        >Index</a>
                        {% endif %}
                    </nav>
                    {# login #}
                    <div class="d-flex">
                        <nav class="navbar-nav me-2">
                            {% if user.is_authenticated %}
                            <a
                                class="nav-link"
                                href="{% url "logout" %}"
                            >Logout</a>
                            {% else %}
                            <a
                                class="nav-link"
                                href="{% url "login" %}"
                            >Login</a>
                            {% endif %}
                        </nav>
                    </div>
                    {# end login #}
                </div>
            </div>
        </nav>

    </header>

    <main
        role="main"
        class="container"
    >
        {% if messages %}
        {% bootstrap_messages messages %}
        {% endif %}

        {% block content %}{% endblock %}
    </main>
    {% block after_content %}{% endblock %}

    <footer class="footer navbar navbar-expand navbar-dark bg-dark">
        <div class="container-md">
            <nav class="navbar-nav text-nowrap overflow-auto mx-auto">
                <a
                    class="nav-link {% active_link '' %}"
                    href="http://fs.tum.de/datenschutz/"
                >Datenschutz</a>
                <a
                    class="nav-link {% active_link '' %}"
                    href="http://fs.tum.de/impressum/"
                >Impressum</a>
            </nav>
        </div>
    </footer>
</body>

</html>
